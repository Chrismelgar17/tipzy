# Backend image for Tipzy API
# Uses Bun runtime to execute the Hono server directly (TypeScript supported by Bun)
FROM oven/bun:1.2

WORKDIR /app

# Install backend-only dependencies to avoid pulling Expo/mobile packages in this image.
COPY backend/package.json ./package.json
RUN BUN_INSTALL_IGNORE_SCRIPTS=1 bun install --production

# Copy backend source
COPY backend ./backend

# PORT is injected by Railway at runtime â€” do not hardcode it here
ENV HOST=0.0.0.0

EXPOSE 3001 8080

CMD ["bun", "backend/server.ts"]
